<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>CS416 Narrative Visualization</title>
    <link href="./styles/css/styles.css" rel="stylesheet" />
    <link href="./styles/css/chart.css" rel="stylesheet" />
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js"
      integrity="sha512-iBAeBWWWFb8HqSBcrqcz98iIpuVH1la39dEYHtyQ/pGpeCQTQVvLJOWAuhv2Q7JSHp9k7hWA7sGxU3hHJe+tFg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>

  <body>
    <main>
      <div id="sidebar" class="nav-bg"></div>
      <div id="divider" class="page-divider"></div>
      <div id="content" class="content-frame">
        <div id="content-desc">
          <h1>CO2 emissions per capita</h1>
          <p>
            This page shows the annual CO2 emissions per capita. Countries that
            rank high in per capita emissions are those located near the equator
            or in the Middle East, such as Qatar. It is not suitable for
            comparison due to its small population and desert climate with
            higher energy consumption. Therefore, emissions per capita are shown
            for the countries with the highest emissions in 2020.
          </p>
          <p>
            Click the buttons to see <b>production-based</b> or
            <b>consumption-based</b>
            per capita.
          </p>
          <div>
            <form name="radioForm">
              <label style="margin-right: 10px">
                <input
                  type="radio"
                  name="radioBtnGroup"
                  value="production"
                  id="radio-prod-id"
                  style="margin-right: 6px"
                  checked="checked"
                />Production-based CO2 emission
              </label>
              <label style="margin-right: 12px">
                <input
                  type="radio"
                  name="radioBtnGroup"
                  value="consumption"
                  id="radio-consum-id"
                  style="margin-right: 6px"
                />Consumption-based CO2 emission
              </label>
              <label
                ><input
                  type="checkbox"
                  name="radioBtnGroup"
                  id="world-chkbox"
                  value="world-chkbox"
                  style="margin-right: 6px"
                />
                World</label
              >
            </form>
          </div>
          <br />
        </div>
        <svg id="content-graph" width="0" height="0"></svg>
        <div id="content-tooltip" class="tooltip"></div>
      </div>
    </main>

    <script type="module">
      import addSidebar from "./js/navBar.js";
      import { clearGraphs } from "./js/graph.js";
      import productionCo2PerCapita from "./js/chart3_1.js";
      import consumptionCo2PerCapita from "./js/chart3_2.js";

      addSidebar(2);
      productionCo2PerCapita();

      const selectionGroup = document.radioForm.radioBtnGroup;
      selectionGroup.forEach((sel) => {
        sel.onclick = (e) => {
          const { target } = e;

          const worldChecked = document.getElementById("world-chkbox").checked;

          clearGraphs();
          if (target.value === "production") {
            productionCo2PerCapita(worldChecked);
          } else if (target.value === "consumption") {
            consumptionCo2PerCapita(worldChecked);
          } else {
            if (document.getElementById("radio-prod-id").checked) {
              productionCo2PerCapita(worldChecked);
            } else {
              consumptionCo2PerCapita(worldChecked);
            }
          }
        };
      });
    </script>
  </body>
</html>
